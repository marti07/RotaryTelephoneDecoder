# Rotary Telephone Decoder

This project is used for decode the pulses generated by a rotary telephone mechanisms and the the number dialed.
The hardware requied is a raspberry pi pico and a rotary mechanism.

The code the load on raspberry pi pico is explaned below.

## Hardware

For this project you need a raspberry pi pico and a rotary telephone mechanism. 

The documentation of raspberry pi pico is available on [Official website of raspberry pi pico](https://www.raspberrypi.com/documentation/microcontrollers/raspberry-pi-pico.html).

Regarding the documentation of rotary telephone mechanism, specially the pins of pulses output.

The following image shows the wiring shema to connect the rotary mechanism to raspberry pi pico.
In my case, the pulses generated by rotary mechanism are detected between pins 3 and L1. These pins are connected to raspberry pi pico on pins GP5 and GND.

![Wiring shem](/images/wiring.png)


## Software

```python
from machine import Pin
import time, _thread

interrupt_flag=0

current_time=time.ticks_us()
debounce_time=50

count=0
number=""

pin = Pin(5, Pin.IN, Pin.PULL_UP)   
pin.irq(trigger=Pin.IRQ_FALLING, handler=rotary_pulses)
print("Ready")

while True:
    if interrupt_flag is 1:        
        time.sleep(1)        
        number = number + str(count%10)
        print ("Number: ", number)
        count=0
        interrupt_flag=0


def rotary_pulses(p):        
    global interrupt_flag, debounce_time, count, current_time    
    if time.ticks_us() - current_time > debounce_time:
        interrupt_flag=1
        count+=1
        current_time=time.ticks_us()


```

The following screenshot shows a output example.

![Screenshot output](/images/screenshot_output.png)


## Contributing

Pull requests are welcome. For major changes, please open an issue first
to discuss what you would like to change.

Please make sure to update tests as appropriate.

## License

[MIT](https://choosealicense.com/licenses/mit/)